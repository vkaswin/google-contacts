"use strict";(self.webpackChunkgoogle_contacts=self.webpackChunkgoogle_contacts||[]).push([[443],{1443:(m,r,s)=>{s.r(r),s.d(r,{TrashComponent:()=>u});var t=s(1571),i=s(6895),_=s(8010),h=s(2630),d=s(3399),C=s(5999);function p(a,l){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-contact-header",4),t.NdJ("onClearSelectedContacts",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleClearAllSelectedContacts())})("onDeleteSelectedContacts",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleDeleteAllSelectedContacts())}),t.qZA(),t.TgZ(2,"div",5)(3,"div",6)(4,"span",7),t._uU(5),t.qZA()(),t.TgZ(6,"div",8)(7,"app-contact-list",9),t.NdJ("onRecover",function(c){t.CHM(e);const o=t.oxw();return t.KtG(o.handleRecover(c))})("onChange",function(c){t.CHM(e);const o=t.oxw();return t.KtG(o.handleChange(c))}),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("isTrash",!0)("selectedContacts",e.selectedContactIds.size),t.xp6(4),t.hij("Trash (",e.contactsList.length,")"),t.xp6(2),t.Q6J("isTrash",!0)("contacts",e.contactsList)("selectedContactIds",e.selectedContactIds)}}let u=(()=>{class a{constructor(){this.contactsList=[],this.selectedContactIds=new Set,this.contactService=(0,t.f3M)(C.y),this.snackBar=(0,t.f3M)(_.ux)}ngOnInit(){this.getAllContacts()}getAllContacts(){this.contactService.getAllTrash().subscribe(({data:{contacts:e}})=>{this.contactsList=e})}showSnackBar(e){this.snackBar.open(e,"",{duration:3e3})}handleRecover(e){this.contactService.recoverContact(e).subscribe(({message:n})=>{this.showSnackBar(n);let c=this.contactsList.findIndex(({_id:o})=>e===o);-1!==c&&(this.contactsList.splice(c,1),this.contactService.getContactCount())})}handleEmptyTrash(){window.confirm("Are you sure to delete contacts in trash?")&&this.contactService.clearTrash().subscribe(({message:e})=>{this.showSnackBar(e),this.contactsList=[]})}handleChange({checked:e,contactId:n}){e?this.selectedContactIds.add(n):this.selectedContactIds.delete(n)}handleClearAllSelectedContacts(){this.selectedContactIds.clear()}handleDeleteAllSelectedContacts(){let e=[...this.selectedContactIds];this.contactService.clearTrash(e).subscribe(({message:n})=>{this.showSnackBar(n),this.contactsList=this.contactsList.filter(({_id:c})=>!this.selectedContactIds.has(c)),this.selectedContactIds=new Set})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-trash"]],standalone:!0,features:[t.jDz],decls:6,vars:1,consts:[[1,"flex","items-center","justify-center","gap-4","bg-light-silver","py-3","rounded-md","text-sm","font-medium"],[1,"text-gray"],[1,"text-light-blue","bg-sky-blue","px-2","py-1","rounded-sm",3,"click"],[4,"ngIf"],[3,"isTrash","selectedContacts","onClearSelectedContacts","onDeleteSelectedContacts"],[1,"relative"],[1,"p-3","sticky","top-[50px]","left-0","z-10","bg-white"],[1,"text-gray","font-medium","text-xs","capitalize"],[1,"flex","flex-col"],[3,"isTrash","contacts","selectedContactIds","onRecover","onChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2," Contacts that have been deleted will be present in the trash "),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.handleEmptyTrash()}),t._uU(4," Empty Trash now "),t.qZA()(),t.YNc(5,p,8,6,"ng-container",3)),2&e&&(t.xp6(5),t.Q6J("ngIf",0!==n.contactsList.length))},dependencies:[i.ez,i.O5,d.E,h.p,_.ZX],encapsulation:2}),a})()}}]);