"use strict";(self.webpackChunkgoogle_contacts=self.webpackChunkgoogle_contacts||[]).push([[349],{8349:(U,b,l)=>{l.r(b),l.d(b,{LayoutComponent:()=>S});var u=l(6895),e=l(1571),s=l(1489),d=l(5412),c=l(8010),p=l(1561),_=l(3169),v=l(1778);let k=(()=>{class o{constructor(){this.onToggleMenu=new e.vpe,this.router=(0,e.f3M)(s.F0),this.activatedRoute=(0,e.f3M)(s.gz),this.authService=(0,e.f3M)(v.e),this.handleChange=(0,_.Ds)(t=>{let{value:n}=t.target;this.router.navigate([],{queryParams:{q:n||null}})},500)}handleClick(){this.onToggleMenu.emit()}get search(){return this.activatedRoute.snapshot.queryParams.q||""}get initial(){if(!this.authService.user)return"";let[t,n=""]=this.authService.user.name.split(" ");return`${t[0].toUpperCase()}${n[0].toUpperCase()}`.trim()}handleLogOut(){this.authService.onLogout()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-header"]],outputs:{onToggleMenu:"onToggleMenu"},standalone:!0,features:[e.jDz],decls:23,vars:4,consts:[[1,"grid","grid-cols-header","items-center","h-header","px-4"],[1,"flex","items-center","gap-2","text-gray"],[1,"flex","justify-center","items-center","w-[48px]","h-[48px]","cursor-pointer","hover:rounded-full","hover:bg-light-silver"],[1,"icon-menu","text-3xl",3,"click"],[1,"flex","items-center","gap-2","text-gray","text-xl","font-medium","cursor-pointer",3,"routerLink"],["src","assets/images/logo.png",1,"w-[44px]","h-[40px]"],[1,"relative","w-[90%]"],[1,"icon-magnify","absolute","top-1/2","left-3","-translate-y-1/2","text-gray","text-2xl"],["placeholder","Search",1,"w-full","bg-light-silver","h-search","rounded-md","px-12","outline-none","focus:bg-dark-white","focus:shadow-search","focus:rounded-br-none","focus:rounded-bl-none",3,"defaultValue","input"],[1,"flex","items-center","justify-end","gap-6"],[1,"flex","items-center","justify-center","w-11","h-11","bg-blue","rounded-full","cursor-pointer",3,"matMenuTriggerFor"],[1,"text-white","font-medium","text-lg"],["userOption",""],[1,"max-h-56","overflow-y-auto"],["mat-menu-item","",3,"click"],[1,"flex","gap-3","justify-between","items-center"],[1,"icon-logout","text-2xl"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),e.NdJ("click",function(){return n.handleClick()}),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"img",5),e._uU(6," Contacts "),e.qZA()(),e.TgZ(7,"div")(8,"div",6),e._UZ(9,"i",7),e.TgZ(10,"input",8),e.NdJ("input",function(r){return n.handleChange(r)}),e.qZA()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"span",11),e._uU(14),e.qZA()(),e.TgZ(15,"mat-menu",null,12)(17,"div",13)(18,"button",14),e.NdJ("click",function(){return n.handleLogOut()}),e.TgZ(19,"div",15),e._UZ(20,"i",16),e.TgZ(21,"span"),e._uU(22,"Logout"),e.qZA()()()()()()()),2&t){const i=e.MAs(16);e.xp6(4),e.Q6J("routerLink","/contact/list"),e.xp6(6),e.Q6J("defaultValue",n.search),e.xp6(2),e.Q6J("matMenuTriggerFor",i),e.xp6(2),e.Oqu(n.initial)}},dependencies:[u.ez,s.rH,p.Tx,p.VK,p.OP,p.p6],encapsulation:2}),o})();var h=l(5999);function Z(o,a){if(1&o&&(e.TgZ(0,"span",10),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.file.name)}}let L=(()=>{class o{constructor(){this.contactService=(0,e.f3M)(h.y),this.router=(0,e.f3M)(s.F0),this.snackBar=(0,e.f3M)(c.ux),this.dialogRef=(0,e.f3M)(d.so),this.file=null}showSnackBar(t){this.snackBar.open(t,"",{duration:3e3})}downloadSampleExcelSheet(){this.contactService.downloadSampleFile().subscribe(t=>{let n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="sample-file",n.click()})}handleFileUpload(){if(!this.file)return;const t=new FormData;t.append("file",this.file),this.contactService.bulkUpload(t).subscribe(({message:n})=>{this.contactService.getContactCount(),this.contactService.onBulkUpload.emit(),this.showSnackBar(n),this.dialogRef.close()})}handleFileChange(t){let n=t.target.files;!n||!n.length||(this.file=n[0])}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bulk-upload-popup"]],standalone:!0,features:[e.jDz],decls:19,vars:2,consts:[[1,"flex","flex-col","gap-4","p-6"],[1,"text-xl"],[1,"text-blue","cursor-pointer",3,"click"],[1,"flex","flex-col","gap-3"],["for","file-upload",1,"flex","justify-center","items-center","w-28","h-8","bg-blue","rounded","text-white","cursor-pointer"],["class","text-sm",4,"ngIf"],["id","file-upload","type","file","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","hidden","",3,"input"],[1,"flex","justify-end","gap-3"],[1,"text-blue","text-sm","font-medium","bg-transparent","h-8","px-3","hover:bg-[#DBE7F8]","rounded","transition-colors",3,"click"],[1,"text-blue","text-sm","font-medium","bg-transparent","h-8","px-3","hover:bg-[#DBE7F8]","rounded","transition-colors","disabled:bg-transparent","disabled:hover:bg-transparent","disabled:text-gray","disabled:opacity-50",3,"disabled","click"],[1,"text-sm"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"b",1),e._uU(2,"Import Contacts"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"To import contacts, select a xlsx file"),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Download sample xlsx file "),e.TgZ(7,"span",2),e.NdJ("click",function(){return n.downloadSampleExcelSheet()}),e._uU(8,"here"),e.qZA()(),e.TgZ(9,"div",3)(10,"label",4),e._uU(11,"Select File"),e.qZA(),e.YNc(12,Z,2,1,"span",5),e.qZA(),e.TgZ(13,"input",6),e.NdJ("input",function(r){return n.handleFileChange(r)}),e.qZA(),e.TgZ(14,"div",7)(15,"button",8),e.NdJ("click",function(){return n.dialogRef.close()}),e._uU(16," Cancel "),e.qZA(),e.TgZ(17,"button",9),e.NdJ("click",function(){return n.handleFileUpload()}),e._uU(18," Import "),e.qZA()()()),2&t&&(e.xp6(12),e.Q6J("ngIf",n.file),e.xp6(5),e.Q6J("disabled",!n.file))},dependencies:[u.ez,u.O5,c.ZX],encapsulation:2}),o})();const T=function(o){return["label",o]};function C(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",20)(1,"div",10),e._UZ(2,"i",21),e.TgZ(3,"span",12),e._uU(4),e.qZA()(),e.TgZ(5,"div",22)(6,"i",23),e.NdJ("click",function(i){const f=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleDeleteLabel(i,f._id))}),e.qZA(),e.TgZ(7,"i",24),e.NdJ("click",function(i){const f=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleEditLabel(i,f))}),e.qZA()()()}if(2&o){const t=a.$implicit;e.Q6J("routerLinkActive","active")("routerLink",e.VKq(3,T,t._id)),e.xp6(4),e.Oqu(t.name)}}let y=(()=>{class o{constructor(){this.labels=[],this.count=0,this.onDeleteLabel=new e.vpe,this.onEditLabel=new e.vpe,this.onAddLabel=new e.vpe,this.router=(0,e.f3M)(s.F0),this.dialog=(0,e.f3M)(d.uw)}handleTrackLabel(t,n){return n._id}handleDeleteLabel(t,n){t.stopPropagation(),this.onDeleteLabel.emit(n)}handleAddLabel(t){t.stopPropagation(),this.onAddLabel.emit()}handleEditLabel(t,n){t.stopPropagation(),this.onEditLabel.emit(n)}showBulkUploadPopup(){this.dialog.open(L,{width:"420px"})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sidebar"]],inputs:{labels:"labels",count:"count"},outputs:{onDeleteLabel:"onDeleteLabel",onEditLabel:"onEditLabel",onAddLabel:"onAddLabel"},standalone:!0,features:[e.jDz],decls:34,vars:8,consts:[[1,"group","flex","items-center","gap-2","shadow-create","rounded-full","px-5","mb-5","ml-3","h-create","hover:shadow-create-hover","transition-[box-shadow]","duration-200",3,"routerLink"],["width","36","height","36","viewBox","0 0 36 36"],["fill","#34A853","d","M16 16v14h4V20z"],["fill","#4285F4","d","M30 16H20l-4 4h14z"],["fill","#FBBC05","d","M6 16v4h10l4-4z"],["fill","#EA4335","d","M20 16V6h-4v14z"],["fill","none","d","M0 0h36v36H0z"],[1,"text-dark-gray","group-hover:text-blue","font-medium","text-sm","transition-colors","duration-200"],[1,"flex","flex-col","mb-6"],[1,"flex","items-center","justify-between","font-medium","py-2","px-5","rounded-r-full","[&:not(.active)]:text-dark-gray","[&:not(.active)]:hover:bg-light-silver","[&:is(.active)]:bg-sky-blue","[&:is(.active)]:text-blue","transition-colors","duration-200",3,"routerLink","routerLinkActive"],[1,"flex","items-center","gap-4"],[1,"icon-account-outline","text-2xl"],[1,"text-sm"],[1,"flex","items-center","justify-between","text-dark-gray","font-medium","py-2","px-5","rounded-r-full","hover:bg-light-silver","transition-colors","duration-200",3,"click"],[1,"icon-download-outline","text-2xl"],[1,"icon-trash-can-outline","text-2xl"],[1,"flex","flex-col"],[1,"flex","items-center","justify-between","text-dark-gray","pl-5","pr-3","mb-4"],[1,"icon-plus","w-6","h-6","flex","items-center","justify-center","text-xl","cursor-pointer","hover:bg-light-silver","rounded-full",3,"click"],["class","group flex items-center justify-between font-medium py-2 px-5 rounded-r-full [&:not(.active)]:text-dark-gray [&:not(.active)]:hover:bg-light-silver [&:is(.active)]:bg-sky-blue [&:is(.active)]:text-blue transition-colors duration-200",3,"routerLinkActive","routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","flex","items-center","justify-between","font-medium","py-2","px-5","rounded-r-full","[&:not(.active)]:text-dark-gray","[&:not(.active)]:hover:bg-light-silver","[&:is(.active)]:bg-sky-blue","[&:is(.active)]:text-blue","transition-colors","duration-200",3,"routerLinkActive","routerLink"],[1,"icon-label","text-2xl"],[1,"hidden","items-center","gap-3","group-hover:flex"],[1,"icon-trash-can-outline","text-xl",3,"click"],[1,"icon-pencil-outline","text-xl",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6),e.qZA(),e.kcU(),e.TgZ(7,"span",7),e._uU(8,"Create Contact"),e.qZA()(),e.TgZ(9,"div",8)(10,"button",9)(11,"div",10),e._UZ(12,"i",11),e.TgZ(13,"span",12),e._uU(14,"Contacts"),e.qZA()(),e.TgZ(15,"div")(16,"span",12),e._uU(17),e.qZA()()(),e.TgZ(18,"button",13),e.NdJ("click",function(){return n.showBulkUploadPopup()}),e.TgZ(19,"div",10),e._UZ(20,"i",14),e.TgZ(21,"span",12),e._uU(22,"Import"),e.qZA()()(),e.TgZ(23,"button",9)(24,"div",10),e._UZ(25,"i",15),e.TgZ(26,"span",12),e._uU(27,"Trash"),e.qZA()()()(),e.TgZ(28,"div",16)(29,"div",17)(30,"span",12),e._uU(31,"Labels"),e.qZA(),e.TgZ(32,"i",18),e.NdJ("click",function(r){return n.handleAddLabel(r)}),e.qZA()(),e.YNc(33,C,8,5,"button",19),e.qZA()),2&t&&(e.Q6J("routerLink","add"),e.xp6(10),e.Q6J("routerLink","list")("routerLinkActive","active"),e.xp6(7),e.Oqu(n.count),e.xp6(6),e.Q6J("routerLink","trash")("routerLinkActive","active"),e.xp6(10),e.Q6J("ngForOf",n.labels)("ngForTrackBy",n.handleTrackLabel))},dependencies:[u.ez,u.sg,s.rH,s.Od],encapsulation:2}),o})();var m=l(433),w=l(787);const A=function(){return{required:"Please enter name",minlength:"Name should contain atleast 3 characters",pattern:"Name should contain alphapets only"}};let x=(()=>{class o{constructor(){this.dialogRef=(0,e.f3M)(d.so),this.formBuilder=(0,e.f3M)(m.qu),this.snackBar=(0,e.f3M)(c.ux),this.props=(0,e.f3M)(d.WI),this.contactService=(0,e.f3M)(h.y),this.form=this.formBuilder.group({name:this.formBuilder.control("",[m.kI.required,m.kI.minLength(3)])}),this.isSubmitted=!1}get name(){return this.form.controls.name}ngOnInit(){this.props.isEdit&&this.form.setValue({name:this.props.label.name})}showSnackBar(t){this.snackBar.open(t,"",{duration:3e3})}handleSubmit(){if(this.isSubmitted||(this.isSubmitted=!0),!this.form.valid)return;let t=this.form.value;this.props.isEdit?this.contactService.updateLabelById(this.props.label._id,t).subscribe(({message:n})=>{this.showSnackBar(n),this.contactService.onUpdateLabel.emit({labelId:this.props.label._id,data:t}),this.dialogRef.close()}):this.contactService.createLabel(t).subscribe(({message:n,data:{label:i}})=>{this.showSnackBar(n),this.contactService.onCreateLabel.emit(i),this.dialogRef.close()})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-label-popup"]],standalone:!0,features:[e.jDz],decls:11,vars:6,consts:[[1,"flex","gap-5","flex-col","p-8"],[1,"text-xl"],["label","Label Name","name","name",3,"control","hasError","errorMessage"],[1,"flex","justify-end","gap-4"],[1,"text-blue","text-sm","font-medium","bg-transparent","w-20","h-8","hover:bg-[#DBE7F8]","rounded","transition-colors",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"b",1),e._uU(3),e.qZA()(),e.TgZ(4,"div"),e._UZ(5,"app-input",2),e.qZA(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.dialogRef.close()}),e._uU(8," Cancel "),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.handleSubmit()}),e._uU(10),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(n.props.isEdit?"Edit Label":"Create Label"),e.xp6(2),e.Q6J("control",n.name)("hasError",n.isSubmitted&&null!==n.name.errors)("errorMessage",e.DdM(5,A)),e.xp6(5),e.hij(" ",n.props.isEdit?"Save":"Create"," "))},dependencies:[u.ez,w.a,c.ZX],encapsulation:2}),o})(),S=(()=>{class o{constructor(){this.contactService=(0,e.f3M)(h.y),this.authService=(0,e.f3M)(v.e),this.dialog=(0,e.f3M)(d.uw),this.snackBar=(0,e.f3M)(c.ux),this.router=(0,e.f3M)(s.F0)}get isExpanded(){return this.contactService.isExpanded}get count(){return this.contactService.totalContacts}get labels(){return this.contactService.labels}ngOnInit(){this.contactService.getAllLabels(),this.contactService.getContactCount()}showSnackBar(t){this.snackBar.open(t,"",{duration:3e3})}handleToggleMenu(){this.contactService.setIsExpanded(!this.isExpanded)}handleDeleteLabel(t){window.confirm("Are you sure to delete this lable")&&this.contactService.removeLabelById(t).subscribe(({message:n})=>{this.showSnackBar(n),this.contactService.onDeleteLabel.emit(t),this.router.navigateByUrl("/contact/list")})}handleAddLabel(){this.dialog.open(x,{width:"368px",data:{isEdit:!1}})}handleEditLabel(t){this.dialog.open(x,{width:"368px",data:{label:t,isEdit:!0}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-layout"]],standalone:!0,features:[e.jDz],decls:5,vars:4,consts:[[3,"onToggleMenu"],[1,"relative","h-contact","overflow-x-hidden"],[1,"fixed","h-contact","bottom-0","left-0","overflow-auto","w-sidebar","bg-white","py-5","aria-[expanded=true]:translate-x-0","aria-[expanded=false]:-translate-x-sidebar","transition-transform","duration-200",3,"labels","count","onAddLabel","onEditLabel","onDeleteLabel"],[1,"aria-[expanded=true]:translate-x-sidebar","w-full","aria-[expanded=true]:w-contact","transition-transform","duration-200","px-4","pb-4"]],template:function(t,n){1&t&&(e.TgZ(0,"app-header",0),e.NdJ("onToggleMenu",function(){return n.handleToggleMenu()}),e.qZA(),e.TgZ(1,"div",1)(2,"app-sidebar",2),e.NdJ("onAddLabel",function(){return n.handleAddLabel()})("onEditLabel",function(r){return n.handleEditLabel(r)})("onDeleteLabel",function(r){return n.handleDeleteLabel(r)}),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"router-outlet"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("labels",n.labels)("count",n.count),e.uIk("aria-expanded",n.isExpanded),e.xp6(1),e.uIk("aria-expanded",n.isExpanded))},dependencies:[u.ez,s.Bz,s.lC,k,y,c.ZX],encapsulation:2}),o})()}}]);